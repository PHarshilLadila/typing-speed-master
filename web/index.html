<!DOCTYPE html>
<html lang="en">

<head>
  <base href="$FLUTTER_BASE_HREF">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="flutter-web-renderer" content="html">

  <!-- Primary SEO Description -->
  <meta name="description"
    content="Typing Speed Master – Test your typing speed with real-time accuracy tracking, charts, statistics, and Google login. A powerful typing test web app built with Flutter.">

  <meta name="keywords"
    content="typing speed test, WPM test, typing speed, typing, speed, typing speed master, typing practice, google auth, typing accuracy, online typing app, Flutter web app, Supabase login, typing analytics, typing tracker, real-time typing test, accuracy">

  <meta name="author" content="Typing Speed Master">

  <!-- Required for Flutter -->
  <meta name="flutter-web-auto-detect" content="false">

  <!-- iOS meta tags -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Typing Speed Master">
  <link rel="apple-touch-icon" href="icons/icon-192.jpg">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.jpg" />

  <!-- Correct Page Title -->
  <title>Typing Speed Master – Online Typing Test</title>

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json">

  <link rel=”stylesheet” type=”text/css” href=”assets/styles.css”>


  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3779258307133143"
    crossorigin="anonymous"></script>

  <style>
    .ad-container {
      min-height: 250px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #f5f5f5;
      border: 1px dashed #ccc;
    }

    ins.adsbygoogle {
      background: transparent;
    }
  </style>
</head>

<body>
  
  <!-- Vercel Analytics -->
  <script>
    if (location.hostname.endsWith('vercel.app') || location.hostname.endsWith('.com')) {
      const script = document.createElement('script');
      script.src = '/_vercel/insights/script.js';
      script.defer = true;
      document.body.appendChild(script);
    }
  </script>

  <!-- Script for clean URLs (removes # from URLs) -->
  <script>
    // This script helps remove the # from URLs for cleaner navigation
    (function () {
      // Check if we're on the initial load
      if (window.location.hash && window.location.hash.startsWith('#/')) {
        // Extract the path without the hash
        const path = window.location.hash.substring(1);

        // Use history.replaceState to clean up the URL without triggering a reload
        if (window.history.replaceState) {
          window.history.replaceState(null, null, path);
        }
      }

      // Handle future hash changes
      window.addEventListener('hashchange', function () {
        if (window.location.hash && window.location.hash.startsWith('#/')) {
          const path = window.location.hash.substring(1);
          if (window.history.replaceState) {
            window.history.replaceState(null, null, path);
          }
        }
      });
    })();
  </script>

  <!-- Alternative: For better SPA support -->
  <script>
    // Ensure all paths serve index.html for SPA routing
    // This is especially important for hosting platforms like Vercel
    if (typeof window !== 'undefined') {
      // This helps with deep linking in SPAs
      const handleRedirect = () => {
        // Your hosting platform should handle this, but this is a fallback
        console.log('SPA routing enabled for clean URLs');
      };

      // Initialize when page loads
      window.addEventListener('load', handleRedirect);
    }
  </script>

  <script src="flutter_bootstrap.js" async></script>

  <!-- Fallback for older browsers or hosting platforms -->
  <script>
    // Check if this is a direct page load (not navigation within the app)
    // This helps with page refreshes on deep links
    if (window.location.pathname !== '/' && !window.location.hash) {
      // This is a clean URL deep link - ensure the app handles it
      // The Flutter app will handle the routing through go_router
    }
  </script>
</body>

</html>